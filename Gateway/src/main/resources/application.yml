server:
  port: 9201
spring:
  profiles:
    active: dev
  application:
    name: Gateway
  cloud:
    nacos:
      discovery:
        server-addr: localhost:8848
    gateway:
      default-filters:
        - DedupeResponseHeader=Access-Control-Allow-Credentials Access-Control-Allow-Origin,RETAIN_UNIQUE
      globalcors:
        cors-configurations:
          '[/**]': # 匹配所有请求
            #            allowedOrigins: "*" #跨域处理 允许所有的域
            allowedMethods: # 允许的跨域ajakzx的请求方式
              - "GET"
              - "POST"
              - "DELETE"
              - "PUT"
              - "OPTIONS"
            allowedOriginPatterns: "*" # 允许跨域的地址
            allowedHeaders: "*"# 允许在请求中携带的头信息
            allowCredentials: false # 是否允许携带cookie
            maxAge: 360000 # 这次跨域检测的有效期
      routes: #配置路由路径
        - id: system
          uri: lb://System
          predicates:
            - Path=/sys-comm/**
          filters:
            - StripPrefix=1
        - id: auth
          uri: lb://AuthorizationServer
          predicates:
            - Path=/api/**
          filters:
            - StripPrefix=1
        - id: register
          uri: lb://Register
          predicates:
            - Path=/register/**
          filters:
            - StripPrefix=1
      discovery:
        locator:
          enabled: true #开启从注册中心动态创建路由的功能
          lower-case-service-id: true #使用小写服务名，默认是大写
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: 'http://127.0.0.1:9000'
#          jwk-set-uri: 'http://127.0.0.1:9000/rsa/publicKey' #配置RSA的公钥访问地址
  redis:
    database: 0
    port: 6379
    host: localhost
    password:
secure:
  ignore:
    urls: #配置白名单路径
      - "/actuator/**"
      - "/auth/oauth/token"
      - "/oauth2/token"
      - "/login"
      - "/oauth2/**"
      - "/user/login"
      - "/user/logout"
      - "/captcha"
      - "/favicon.ico"
      - "/api/**"
      - "/register/**"
#      - "/sys-comm/**"
